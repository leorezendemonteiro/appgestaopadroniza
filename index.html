<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestão DRE - CORRETAGESTAO02</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">
  <div id="intro" class="w-full h-screen bg-gray-800 bg-opacity-80 absolute top-0 left-0 flex flex-col justify-center items-center text-white z-50">
    <div class="bg-white text-gray-900 p-8 rounded shadow-md w-full max-w-md">
      <img src="https://i.postimg.cc/vBvK9KGz/ges.jpg" alt="Logo Padroniza" class="w-20 h-20 mx-auto mb-4">
      <h2 class="text-xl font-bold text-center mb-4">Iniciar Gestão DRE</h2>
      <input id="introCompanyName" placeholder="Razão Social" class="w-full p-2 border mb-2 rounded">
      <input id="introCompanyCnpj" placeholder="CNPJ" class="w-full p-2 border mb-4 rounded">
      <button onclick="startApp()" class="w-full bg-green-600 text-white px-4 py-2 rounded">Entrar</button>
    </div>
  </div>

  <div class="flex flex-wrap gap-2 mb-4">
    <button class="tab-button bg-blue-200 px-4 py-2 rounded" onclick="showTab('calibracao')">Calibração</button>
    <button class="tab-button bg-blue-200 px-4 py-2 rounded" onclick="showTab('receitas')">Receitas</button>
    <button class="tab-button bg-blue-200 px-4 py-2 rounded" onclick="showTab('cmv')">CMV</button>
    <button class="tab-button bg-blue-200 px-4 py-2 rounded" onclick="showTab('fixos')">Fixos</button>
    <button class="tab-button bg-blue-200 px-4 py-2 rounded" onclick="showTab('mo')">Mão de Obra</button>
    <button class="tab-button bg-blue-200 px-4 py-2 rounded" onclick="showTab('relatorio')">Relatório</button>
  </div>

  <div id="calibracao" class="tab-content">
    <h2 class="text-xl font-bold mb-2">Calibração</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mb-4">
      <input id="companyName" placeholder="Razão Social" class="p-2 border rounded">
      <input id="companyCnpj" placeholder="CNPJ" class="p-2 border rounded">
      <select id="taxRegime" class="p-2 border rounded">
        <option value="Simples Nacional">Simples Nacional</option>
        <option value="Lucro Presumido">Lucro Presumido</option>
      </select>
      <input id="taxRate" class="p-2 border rounded" placeholder="Alíquota (%)" type="number">
      <input id="taxCredit" class="p-2 border rounded" placeholder="Taxa Crédito (%)" type="number">
      <input id="taxDebit" class="p-2 border rounded" placeholder="Taxa Débito (%)" type="number">
      <input id="taxDelivery" class="p-2 border rounded" placeholder="Taxa Delivery (%)" type="number">
    </div>
    <button onclick="saveSettings()" class="bg-green-600 text-white px-4 py-2 rounded">Salvar Calibração</button>
  </div>

  <script>
    const defaultTabs = ['calibracao', 'receitas', 'cmv', 'fixos', 'mo', 'relatorio'];
    function startApp() {
      const name = document.getElementById('introCompanyName').value;
      const cnpj = document.getElementById('introCompanyCnpj').value;
      if (name && cnpj) {
        localStorage.setItem('settings', JSON.stringify({ companyName: name, companyCnpj: cnpj }));
        document.getElementById('intro').classList.add('hidden');
        document.getElementById('companyName').value = name;
        document.getElementById('companyCnpj').value = cnpj;
        showTab('calibracao');
      } else {
        alert('Preencha todos os campos para iniciar.');
      }
    }

    function showTab(tabId) {
      defaultTabs.forEach(tab => {
        const el = document.getElementById(tab);
        if (el) el.classList.add('hidden');
      });
      const active = document.getElementById(tabId);
      if (active) active.classList.remove('hidden');
    }

    function saveSettings() {
      const settings = {
        companyName: document.getElementById('companyName').value,
        companyCnpj: document.getElementById('companyCnpj').value,
        taxRegime: document.getElementById('taxRegime').value,
        taxRate: parseFloat(document.getElementById('taxRate').value) || 0,
        taxCredit: parseFloat(document.getElementById('taxCredit').value) || 0,
        taxDebit: parseFloat(document.getElementById('taxDebit').value) || 0,
        taxDelivery: parseFloat(document.getElementById('taxDelivery').value) || 0
      };
      localStorage.setItem('settings', JSON.stringify(settings));
      alert('Configurações salvas!');
    }

    window.onload = () => {
      const saved = localStorage.getItem('settings');
      if (saved) {
        const s = JSON.parse(saved);
        document.getElementById('intro').classList.add('hidden');
        document.getElementById('companyName').value = s.companyName || '';
        document.getElementById('companyCnpj').value = s.companyCnpj || '';
        document.getElementById('taxRegime').value = s.taxRegime || 'Simples Nacional';
        document.getElementById('taxRate').value = s.taxRate || '';
        document.getElementById('taxCredit').value = s.taxCredit || '';
        document.getElementById('taxDebit').value = s.taxDebit || '';
        document.getElementById('taxDelivery').value = s.taxDelivery || '';
        showTab('calibracao');
      }
    }
  </script>
</body>
</html>
